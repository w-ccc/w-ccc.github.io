<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Homework3</title>
		<style type="text/css">
			div.introduction{background:#999;width:300px;height:100%;position:fixed;right:0;bottom:0;text-align:center;}
			div.footer{position:absolute;bottom:0;left:center;width:100%;text-align:center;}
			div.container{margin-right:300px;}
			div.column{width:100%;margin-left:10px;}
			div.colElem{width:100px;padding:1px;text-align:center;float:left;margin-left:10px;}
			div.content{margin-top:40px;margin-left:10%;margin-right:10%;border:3px dashed #AAA;}
			div.contentTitle{margin-top:40px;margin-left:10px;}
			div.contentShow{margin-left:5%;margin-right:5%;}
			p.contentTitle{font-family:SimHei;font-size:25px;}
			p.contentShow{font-family:FangSong;font-size:18px;}
			p.column{font-family:Microsoft JhengHei;font-size:20px;}
			p.introduction{color:white;padding:16px;font-family:KaiTi;font-size:18px;line-height:30px;}
			p.information{color:white;padding:16px;font-family:KaiTi;font-size:15px;line-height:25px;}
			p.footer{color:white; font-family:Arial;font-size:5px;}
			a:link,a:visited{color:black;text-decoration:none;}
			a:hover,a:active{color:red;text-decoration:none;}
		</style>
	</head>
<body bgcolor="#DDD">
	<div class="introduction">
		<div style="padding:10px;margin:15px auto">
			<img src="https://raw.githubusercontent.com/w-ccc/w-ccc.github.io/master/image/photo.jpg" width = "100%"/>
		</div>
		<hr style="width:80%;border:1px double skyblue;"/>
		<p class="introduction">
			姓名：池婧雯<br/>
			专业：软件工程<br/>
			特长：睡懒觉<br/>
			爱好：玩游戏、看动漫、画漫画、密室逃脱……和睡懒觉
		</p>
		<p class="information">
			GitHub:w-ccc<br/>
			微信号：15011211197<br/>
			邮箱：chijingwen13@gmail.com
		</p>
		<div class="footer">
			<p class="footer">Copyright © 2015 by Wendy Chi.</p>
			<p class="footer">All rights reserved.</p>
		</div>
	</div>
	<div class="container">
		<div class="column">
			<div class="colElem">
				<p class="column"><a href="http://w-ccc.github.io/">个人日志</a></p>
			</div>
			<div class="colElem">
				<p class="column"><a href="http://w-ccc.github.io/HWPage.html"><strong>课程作业</strong></a></p>
				<hr style="color:gray;width:100px;border:1px solid gray;"/>
			</div>
		</div>
		<hr style="color:black;width:100%;border:1px dashed skyblue;"/>
		<div class="content">
			<div class="contentTitle"><p class="contentTitle">1.简易DOM选择器</p></div>
			<hr style="color:#EEE;width:25%;border:1px solid #BBB;margin-left:5px;"/>
			<div class="contentShow">
				<p class="contentShow">
				function $(arg)<br/>
				{<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(typeof(arg)!='string')<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 'NotExist';<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(arg[0]=='#')<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!document.getElementById(arg.substring(1)))<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 'NotExist';<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return document.getElementById(arg.substring(1));<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else if(arg[0]=='.')<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return document.getElementsByClassName(arg.substring(1));<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return document.getElementsByTagName(arg);<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
				};
				<br/><br/>
				</p>
			</div>
		</div>
		<div class="content">
			<div class="contentTitle"><p class="contentTitle">2.DOM属性访问器</p></div>
			<hr style="color:#EEE;width:25%;border:1px solid #BBB;margin-left:5px;"/>
			<div class="contentShow">
				<p class="contentShow">
				Object.prototype.attr=function attr(attrName,value)<br/>
				{<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this=='NotExist')<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undefined;<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(value==undefined)<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this.getAttribute == undefined)<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undefined;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!this.getAttribute(attrName))<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undefined;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return this.getAttribute(attrName);<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this.setAttribute == undefined)<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undefined;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(typeof(attrName)!='string'||attrName==''||attrName[0]<'a'||attrName[0]> 'z')<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.setAttribute(attrName,value);<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
				};
				<br/><br/>
				</p>
				<script Language="JavaScript">
				function $(arg)
				{
					if(typeof(arg)!='string')
						return 'NotExist';
					if(arg[0]=='#')
					{
						if(!document.getElementById(arg.substring(1)))
							return 'NotExist';
						return document.getElementById(arg.substring(1));
					}
					else if(arg[0]=='.')
					{
						return document.getElementsByClassName(arg.substring(1));
					}
					else
					{
						return document.getElementsByTagName(arg);
					}
				};

				Object.prototype.attr=function attr(attrName,value)
				{
					if(this=='NotExist')
						return undefined;
					if(value==undefined)
					{
						if(this.getAttribute == undefined)
							return undefined;
						if(!this.getAttribute(attrName))
							return undefined;
						return this.getAttribute(attrName);
					}
					else
					{
						if(this.setAttribute == undefined)
							return undefined;
						if(typeof(attrName)!='string'||attrName==''||attrName[0]<'a'||attrName[0]>'z')
							return false;
						this.setAttribute(attrName,value);
						return true;
					}
				};
				</script>
			</div>
		</div>
		<div class="content">
			<div class="contentTitle"><p class="contentTitle">3.返回顶部按钮</p></div>
			<hr style="color:#EEE;width:25%;border:1px solid #BBB;margin-left:5px;"/>
			<div class="contentShow">
				<p class="contentShow">
				通过document.getElementById('top')函数可获得返回顶部按钮控件，初始化函数init()使用格式与题目要求相同。<br/><br/>
				控件效果见页面右下角，按Enter键可快速返回顶部。<br/>
				按下方各按钮可改变返回顶部按钮位置：<br/>
				x:<input id="posX" />y:<input id="posY" />
				<input type="button" value="修改位置" onclick="changePosition();" /><br/>
				<input type="button" value="置于左上" onclick="document.getElementById('top').init({LeftUp:true});" />
				<input type="button" value="置于右上" onclick="document.getElementById('top').init({RightUp:true});" /><br/>
				<input type="button" value="置于左下" onclick="document.getElementById('top').init({LeftDown:true});" />
				<input type="button" value="置于右下" onclick="document.getElementById('top').init({RightDown:true});" />
				<script language="JavaScript">
				(function(){
					var button=document.createElement('DIV');
					button.id='top';
					button.style.cssText='background-color:#AAA;width:50px;height:50px;position:fixed;right:380px;bottom:30px;border-radius:10px;display:none;';
					button.innerHTML='<div style="height:0;width:0;border:14px solid #AAA;border-top:0 none;border-bottom:14px solid #fff;position:relative;margin:12px 0 0 11px;"><div style="width:12px;height:12px;position:absolute;top:14px;left:-5px;background-color:#fff;overflow:hidden;"></div></div>';
					document.body.appendChild(button);
					
					button.onclick=function(){
						if(window.pageYOffset>0)
						{
							window.scrollTo(0, window.pageYOffset / 1.1);
							setTimeout(arguments.callee, 10);
						}
					};
					
					button.onmouseover=function(){
						button.firstChild.style.borderBottom = '14px solid #ccc';
						button.firstChild.firstChild.style.backgroundColor = '#ccc';
					};
					
					button.onmouseout=function(){
						button.firstChild.style.borderBottom = '14px solid #fff';
						button.firstChild.firstChild.style.backgroundColor = '#fff';
					};
					
					document.getElementById('top').init=function(loc){
						if(loc&&loc.x&&loc.y)
						{
							button.style.left=loc.x+'px';
							button.style.top=loc.y+'px';
							button.style.right=button.style.bottom='';
						}
						else if(loc&&loc.LeftUp)
						{
							button.style.left='80px';
							button.style.top='30px';
							button.style.right=button.style.bottom='';
						}
						else if(loc&&loc.LeftDown)
						{
							button.style.left='80px';
							button.style.bottom='30px';
							button.style.right=button.style.top='';
						}
						else if(loc&&loc.RightUp)
						{
							button.style.right='380px';
							button.style.top='30px';
							button.style.left=button.style.bottom='';
						}
						else if(loc&&loc.RightDown)
						{
							button.style.right='380px';
							button.style.bottom='30px';
							button.style.left=button.style.top='';
						}
					};
				})();
				
				function changePosition()
				{
					var posx=document.getElementById('posX').value;
					var posy=document.getElementById('posY').value;
					document.getElementById('top').init({x:parseInt(posx),y:parseInt(posy)});
				}
				
				window.addEventListener('scroll',function(){
					if(window.pageYOffset>0)
						document.getElementById('top').style.display='block';
					else
						document.getElementById('top').style.display='none';
				},false);
				
				document.onkeypress=function(evt)
				{
					if(evt.keyCode==13)
						document.getElementById('top').onclick();
				};
				</script>
				<br/><br/>
				</p>
			</div>
		</div>
		<div id="Modal" style="display:none; position:absolute; z-index:1000; background:#ccc; width:400px; height:300px;text-align：center;padding:30px;">
			我是一个自定义弹窗
		</div>
		<div class="content">
			<div class="contentTitle"><p class="contentTitle">4.自定义弹窗</p></div>
			<hr style="color:#EEE;width:25%;border:1px solid #BBB;margin-left:5px;"/>
			<div class="contentShow">

				<p class="contentShow">
				通过document.getElementById('Modal')函数可获得返回顶部按钮控件，初始化函数init()使用格式与题目要求相同。<br/><br/>
				按下方各按钮可执行弹窗相关操作：<br/>
				<input type="button" value="打开" onclick="showDiv();" /><br/>
				<input id="content" />
				<input type="button" value="修改弹窗内容" onclick="input();" /><br/>
				<input type="button" value="设为可拖拽" onclick="document.getElementById('Modal').init({draggable:true});" />
				<input type="button" value="设为不可拖拽" onclick="document.getElementById('Modal').init({draggable:false});" /><br/>
				<input id="closeKey" />
				<input type="button" value="修改关闭弹窗键位" onclick="closeKey()" />
				<script language="JavaScript">
					var button=document.createElement("input");
					button.type="button";
					button.value="关闭";
					button.onclick=closeDiv;
					button.style.position="absolute";
					button.style.right="25px";
					button.style.bottom="20px";
					Modal.appendChild(button);
					var drag=true;
					function showDiv()
					{
						var Modal=document.getElementById('Modal');
						Modal.style.display = "block";
						Modal.style.left=(document.documentElement.clientWidth-Modal.clientWidth)/2+pageXOffset+"px";
						Modal.style.top =(document.documentElement.clientHeight-Modal.clientHeight)/2+pageYOffset+"px";
						
						var bg = document.createElement("div"); 
						bg.setAttribute("id","mybg");
						bg.style.background = "#000";
						bg.style.width = "100%";
						bg.style.height = "100%";
						bg.style.position = "fixed";
						bg.style.top = "0";
						bg.style.left = "0";
						bg.style.zIndex = "500";
						bg.style.opacity = "0.6";
						bg.style.filter = "Alpha(opacity=70)";
						document.body.appendChild(bg);
						document.body.style.overflow = "hidden";
						 
						var posX;
						var posY;
						if(drag)
						{
							Modal.onmousedown=function(e)
							{
								posX = e.clientX - parseInt(Modal.style.left);
								posY = e.clientY - parseInt(Modal.style.top);
								document.onmousemove = mousemove;
							}
							document.onmouseup = function()
							{
								document.onmousemove = null;
							}
							function mousemove(ev)
							{
								Modal.style.left = (ev.clientX - posX)+"px";
								Modal.style.top = (ev.clientY - posY)+"px";
							}
						}
						else
						{
							Modal.onmousedown=null;
						}
					}
					function closeDiv()
					{
						var Modal=document.getElementById('Modal');
						Modal.style.display="none";
						document.body.style.overflow = "auto"; 
						var body = document.getElementsByTagName('body');
						var mybg = document.getElementById('mybg');
						body[0].removeChild(mybg);
					}
					function input()
					{
						var text=document.getElementById('content').value;
						document.getElementById('Modal').init({content:text});
					}
					function closeKey()
					{
						var key=document.getElementById('closeKey').value;
						document.getElementById('Modal').init({closeKey:parseInt(key)});
					}
					document.getElementById('Modal').init=function(set){
						if(set&&set.content)
						{
							this.innerText=set.content;
							var button=document.createElement("input");
							button.type="button";
							button.value="关闭";
							button.onclick=closeDiv;
							button.style.position="absolute";
							button.style.right="25px";
							button.style.bottom="20px";
							Modal.appendChild(button);
						}
						if(set&&set.draggable==false)
						{
							drag=false;
						}
						else if(set&&set.draggable==true)
						{
							drag=true;
						}
						if(set&&set.closeKey)
						{
							document.onkeypress=function(evt)
							{
								if(evt.keyCode==set.closeKey)
									closeDiv();
							};
						}
					};
				</script>
				<br/><br/>
				</p>
			</div>
		</div>
		<div class="content">
			<div class="contentTitle"><p class="contentTitle">5.DOM分析题</p></div>
			<hr style="color:#EEE;width:25%;border:1px solid #BBB;margin-left:5px;"/>
			<div class="contentShow">
				<p class="contentShow">
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;该网页的界面主要由两部分组成，第一部分是页面上方的操作介绍，第二部分就是下方主界面了。下方主界面又分为四部分，分别是左侧、右侧、中央游戏区和与之重叠的游戏关卡选择区。<br/>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;该游戏的JavaScript代码分为5个文件，分别是index.html、animateClass.js、bg.js、gjs.js、main.js。其中animateClass.js文件主要用来实现移动的动画效果；bg.js主要用来定义背景的对象并根据参数创建背景；gjs.js主要用来实现关卡选择界面的逻辑层；main.js主要用来实现游戏过程中的逻辑层，其中包含大量有关碰到敌人、吃到金币、吃到蘑菇、死亡等情况的处理函数；index.html中的JavaScript代码主要用于控制游戏的进行，其中包含当前界面、人物状态、生命值、金币数、当前关卡、剩余时间等变量，在每关开始前先调用statr(jlol,ggk)函数初始化背景、人物等，其中jlol代表人物状态、ggk代表当前关卡，然后每30毫秒调用一次int()函数，根据玩家当前按下的按键修改各参数，然后执行zou()函数，在其中调用main.js中的各函数进行判断，并执行具体操作。为得知当前按下的按键，在index.html中还添加了keydown和keyup两个事件的键盘响应函数，通过keystate数组记录当前按下的按键，以便在int()函数中进行判断。<br/><br/>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当游戏开始进行之后，首先通过关卡选择界面进入对应的游戏关卡。进入游戏界面后，执行statr函数对游戏界面初始化，并每隔30毫秒进行刷新。当玩家按下某个按键时，通过按键响应函数改变keystate的值，并在刷新界面时，对相应keystate的改变做出反应从而进行游戏。<br/><br/>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;主要用到的DOM操作有document.getElementById、document.addEventListener、setInterval等。<br/><br/>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;相关事件有keydown和keyup。
				<br/><br/>
				</p>
			</div>
		</div>
	</div>
</body>
</html>